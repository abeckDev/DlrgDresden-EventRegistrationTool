@using System.Net.Http
@inject HttpClient Http
@using System.Net.Http.Json

@page "/"


<Breadcrumb>
    <BreadcrumbItem>
        <BreadcrumbLink To="">Startseite</BreadcrumbLink>
    </BreadcrumbItem>
</Breadcrumb>

<Row>
    <Column Margin="Margin.Is2.FromTop">
        <Text Class="text-center">
            <h2>Jahreshauptversammlung DLRG Bezirk Dresden e. V. - Online Anmeldung</h2>
        </Text>

        <Card>
            <CardBody>
                <CardText>
                    <Text>
                        Aufgrund der Coronaviruspandemie, wir die diesjährige Jahreshauptversammlung der DLRG Dresden
                        als Online Event stattfinden.
                        Um einen korrekten Ablauf der Veranstaltung gewährleisten zu können müssen nun zusätzliche Tools
                        für Abstimmung und Konferenz bereitgestellt werden.
                        Daher wird die Anmeldung zur Jahreshauptversammlung auch erstmalig online und automatisiert
                        stattfinden.
                        In den folgenden Abschnitten finden Sie alle weitere benötigten Informationen zur diesjährigen
                        Veranstaltung inkl. dem Anmeldeformular.
                    </Text>
                </CardText>
            </CardBody>
        </Card>
    </Column>
</Row>

<Row>
    <Column>
        <Card Margin="Margin.Is4.FromBottom.Is2.FromTop">
            <CardBody>
                @if (metaInformation.IsLoaded == false)
                {
                    <Loader />
                }
                else
                {
                    @if (metaInformation.IsRegistrationDeadlineReached)
                    {
                        <Alert Color="Color.Danger" Visible="true">
                            <AlertDescription Class="text-center">Anmeldungen zur Jahreshauptversammlung sind nicht mehr
                                möglich!
                            </AlertDescription>
                        </Alert>
                    }
                    else
                    {
                        <CardText>
                            <Alert Color="Color.Success" Visible="true">
                                <AlertDescription Class="text-center">Anmeldungen zur Jahreshauptversammlung sind noch möglich!
                                </AlertDescription>
                            </Alert>
                            <Text Class="text-center" style="font-weight:700">
                                Der Anmeldeschluss ist der: @Deadline
                                <br />
                                <Button Color="Color.Primary" Type="ButtonType.Link" To="/registration">Zur Anmeldung!</Button>
                            </Text>
                        </CardText>
                    }
                }
            </CardBody>
        </Card>
    </Column>
</Row>
<Row>
    <Column>
        <Card Margin="Margin.Is4.FromBottom.Is4.FromTop">
            <CardBody>
                <CardText>
                    <h3>Was ist die Weisheit des Tages?</h3>
                    <Paragraph>
                        Die Weisheit des Tages ist ein einfacher Webservice der jeden Tag eine neue Weisheit aus dem
                        Bereich des Rettungsschwimmen in form einer JSON Nachricht ausgibt.
                    </Paragraph>
                    <Paragraph>
                        Die Weisheit des Tages Plattform als Quelle von anderen Webseiten, Apps, Shells o.ä. verwendet
                        werden um den Besuchern täglich einen neuen Fakt anzuzeigen.
                    </Paragraph>
                    <Paragraph>
                        Die Weisheiten wurden von der Community gesammelt und nach einem Review freigegeben um
                        Sicherzustellen, dass keine unangemessenen Inhalte veröffentlicht werden.
                    </Paragraph>
                    <Paragraph>
                        Vorschläge für neuen Weisheiten können über diese Webseite eingereicht werden. Bitte verwendet
                        dazu den Button oben rechts.
                    </Paragraph>
                    <Paragraph>
                        Wenngleich auch einige Weisheiten einen Bezug zur DLRG herstellen, handelt es sich hierbei
                        <strong>nicht um einen offiziellen Dienst der DLRG oder des ISC der DLRG.</strong>
                    </Paragraph>
                </CardText>
            </CardBody>
        </Card>
    </Column>
</Row>
<Row>
    <Column>
        <Card Margin="Margin.Is4.FromBottom.Is4.FromTop">
            <CardBody>
                <CardText>
                    <h3>Verwendungsmöglichkeiten</h3>
                    <Paragraph>
                        Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt
                        ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo
                        dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor
                        sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor
                        invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et
                        justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem
                        ipsum dolor sit amet.
                    </Paragraph>
                </CardText>
            </CardBody>
        </Card>
    </Column>
</Row>
<Row>
    <Column>
        <Card Margin="Margin.Is4.FromBottom.Is4.FromTop">
            <CardBody>
                <CardText>
                    <h3>Mach mit!</h3>
                    <Paragraph>
                        Wir sind immer auf der suche nach neuen Weisheiten!
                        Wenn du deine Weisheit mit der Community teilen möchtest, dann schlage uns deine Weisheit über
                        den Button oben rechts vor.
                    </Paragraph>
                    <Paragraph>
                        <strong>Bitte beachte unbedingt die folgenden Richtlinien:</strong>
                        <ul>
                            * Keine Beleidigungen
                            <br />
                            * Keine Diskriminierungen
                            <br />
                            * Keine rassistisch oder sexistischen Kommentare oder jede andere Form von Hass
                            <br />
                        </ul>
                    </Paragraph>
                </CardText>
            </CardBody>
        </Card>
    </Column>
</Row>



<h1>Allgemeine Informationen</h1>

Anmeldeschluss: @metaInformation.RegistrationDeadline





Deadline bis zur Anmeldefrist

Kurze Erläuterung

Mit Link zur Anmeldung.

@code {

    MetadataInformation metaInformation = new MetadataInformation();

    string Deadline;
    protected override async Task OnInitializedAsync()
    {
        metaInformation = await GetMetaInformation();
        Deadline = metaInformation.RegistrationDeadline.ToString("dd.MM.yyyy");
    }




    private async Task<MetadataInformation> GetMetaInformation()
    {
        var response = await Http.GetFromJsonAsync<MetadataInformation>("api/EventMetadataFunction");
        response.IsLoaded = true;
        response.IsRegistrationDeadlineReached = GetIsDeadlineReached(response.RegistrationDeadline);
        return response;
    }

    private bool GetIsDeadlineReached(DateTime firstDate)
    {
        if (DateTime.Compare(firstDate, DateTime.Now) < 0)
        {
            return true;
        }
        return false;
    }

}
